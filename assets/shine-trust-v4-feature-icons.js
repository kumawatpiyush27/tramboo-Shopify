!function(e){"use strict";const t=setInterval((()=>{window.ST_GLOBALS&&(clearInterval(t),n().then((()=>console.info("ST Feature Icon loaded"))))}));class i{constructor(t){this.editor=t,this.divEl=e.createElement("div")}render(){const{id:e,position:t,html:i,css:o,editor:n}=this.editor;return this.divEl.classList.add("st-feature-wrapper"),this.divEl.classList.add(`st-feature-${e}`),this.divEl.innerHTML=i,Object.keys(n?.mapping).map((e=>{this.divEl.querySelector(e).innerText=window.ST_GLOBALS.translate(n?.mapping[e])})),{id:e,position:t,html:i,css:o,editor:n,titleFontFamily:{fontFamily:this.editor?.editor?.titleFontFamily?.fontFamily,fontWeight:this.editor?.editor?.titleFontFamily?.fontWeight},subFontFamily:{fontFamily:this.editor?.editor?.subFontFamily?.fontFamily,fontWeight:this.editor?.editor?.subFontFamily?.fontWeight},filters:window.ST_GLOBALS.convertFilters(this.editor?.position?.productFilters,this.editor?.position?.products),divEl:this.divEl}}}const o={},n=async function(){if(!window.ST_PLAN||"ACTIVE"!==window.ST_PLAN?.status||"Advanced"!==window.ST_PLAN?.name)return;const e=window.ST_FEATURE_ICONS||[];if(0===e.length)return;const t=[];let n="";e.map((e=>{const{status:l=!1}=e;if(l){const l=new i(e).render();o[l.id]=l;const s=l.titleFontFamily,r=l.subFontFamily;if("object"==typeof s&&s?.fontFamily){0===t.filter((e=>e.fontFamily===s.fontFamily&&parseInt(e.fontWeight)===parseInt(s.fontWeight))).length&&t.push(s)}if("object"==typeof r&&r?.fontFamily){0===t.filter((e=>e.fontFamily===r.fontFamily&&parseInt(e.fontWeight)===parseInt(r.fontWeight))).length&&t.push(r)}const c=l.css;n+=c}})),t.length&&t.map((e=>{window.ST_LOADED_FONTS.includes(e.fontFamily)||window.ST_GLOBALS.loadFont(e)})),window.ST_GLOBALS.addStyle(n),l()},l=async function(){let t=window.ST_GLOBALS.pageType;for(const i in o){const n=o[i],{position:l,id:r,filters:c,divEl:a}=n;if("block"===l.page){let t=e.querySelectorAll(".shine-feature-icon:not(.shine-show)");for(let e=0;e<t.length;e++){if((t[e].getAttribute("data-id")||"")===r){let i=a.cloneNode(!0);t[e].appendChild(i),t[e].classList.add("shine-show");const o=t[e].querySelector(".st-editor-preview");o&&(o.style.display="none")}}}else if("custom"===l.page&&""!==l.selector.cssSelector){let t=l.selector.cssSelector.split(",");const i=l?.selector?.cssPosition?l?.selector?.cssPosition:"below";for(let o=0;o<t.length;o++)setInterval((async()=>{let n=e.querySelector(t[o]);if(n&&!n.classList.contains("st-feature-icon-"+r)){const e=n.parentNode.querySelectorAll(".st-feature-"+r);for(let t=0;t<e.length;t++)e[t].remove();let t=a.cloneNode(!0);"above"===i?n.parentNode.insertBefore(t,n):n.parentNode.insertBefore(t,n.nextSibling),n.classList.add("st-feature-icon-"+r)}}),500)}else if(t===l.page){e.getElementsByTagName("html")[0].getAttribute("lang");let t="";if("product"===l.page){t=window.ST_GLOBALS.selectorForm,""!==l.selector.cssSelector&&(t=l.selector.cssSelector);try{const e=window.ST_GLOBALS.product;let{inventory:i,collections:o,tags:n,title:r,id:d,available:f,price:p,price_min:y,price_max:h,compare_at_price:g,vendor:u,type:S}=e;if(p=window.ST_GLOBALS.fixPrice(p),y=window.ST_GLOBALS.fixPrice(y),h=window.ST_GLOBALS.fixPrice(h),g=window.ST_GLOBALS.fixPrice(g),c.select_all&&c?.collection.length){const e=o.some((e=>c.collection.includes(e.toString())));(c.collection.includes("all")||e)&&s(l.page,t,a)}else if(c.select_all&&0===Object.keys(c.filters).length)s(l.page,t,a);else if(c.select_all&&Object.keys(c.filters).length){let e=0,o=Object.keys(c.filters).length;for(const t in c.filters)"_s"===t&&r.includes(c.filters[t])&&(e+=1),"price"===t&&!isNaN(y)&&!isNaN(h)&&y>=c.filters[t].min&&h<=c.filters[t].max&&(e+=1),"tag"===t&&n.includes(`${c.filters.tag}`)&&(e+=1),"vendor"===t&&u===c.filters.vendor&&(e+=1),"type"===t&&S===c.filters.type&&(e+=1),"inventory"===t&&("instock"===c.filters.inventory.type&&f&&(e+=1),"outstock"!==c.filters.inventory.type||f||(e+=1),"less-than"===c.filters.inventory.type&&f&&!isNaN(i)&&i<=c.filters.inventory.lte&&(e+=1),"great-than"===c.filters.inventory.type&&f&&!isNaN(i)&&i>=c.filters.inventory.gte&&(e+=1));e===o&&s(l.page,t,a)}else!c.select_all&&c.products.size&&c.products.has(d)&&s(l.page,t,a)}catch(e){console.log(e)}}else"cart"===l.page&&(t='button[name="checkout"]',""!==l.selector.cssSelector&&(t=l.selector.cssSelector),s(l.page,t,a))}}},s=function(t,i,o){if(""!==i){let l=e.querySelectorAll(i);if("cart"===t&&(l.length||(l=e.querySelectorAll(`form[action="/cart"], form[action="/${lang}/cart"]`)),l.length||(l=e.querySelectorAll(`form[action="/checkout"], form[action="/${lang}/checkout"]`))),l.length)for(var n=0;n<l.length;n++){"cart"===t&&(l[n].parentNode.style.flexWrap="wrap");let e=o.cloneNode(!0);l[n].parentNode.insertBefore(e,l[n].nextSibling)}}}}(window.document);